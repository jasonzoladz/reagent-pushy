(ns main.core
  (:require [reagent.core :as reagent :refer [atom]]
            [ajax.core :as ajax]))

(enable-console-print!)

(def app-state (atom {"some-view" ""}))

(defn test-view []
  [:div {:style {:border "1px solid black"}}
    [:h3 "Some Other View"]
 	  [:p "Magical content."]])

(def test-view-with-meta 
  (with-meta test-view 
    {:component-did-mount  #(println "view finished rendering.")
     :component-did-update #(println "view finished rendering.")}))

(defn app-view []
	[:div
  	[:h1 "hello world"]
    (test-view-with-meta)])

(def app-view-with-meta 
  (with-meta app-view
             {:component-did-mount  #(println "view finished rendering.")
              :component-did-update #(println "view finished rendering.")}))


(reagent/render-component [app-view-with-meta] (.getElementById js/document "app"))

       (function() {
         var a = window.location.host.indexOf('localhost');
         console.log('URL: ' + window.location.host);
         if (a >= 0) {
           window.env = 'dev';
           console.log('env is set to DEV');
         } else if (a < 0) {
          window.env = 'prod';
          console.log('env is set to PROD');
         }
      })();


